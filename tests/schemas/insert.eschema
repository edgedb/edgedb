link l3:
    link property comment to str:
        default := "N/A"

link subordinates:
    link property comment to str

type Subordinate:
    required link name to str

type InsertTest:
    link name to str
    link l1 to int
    required link l2 to int
    link l3 to str:
        default := "test"
    link subordinates to Subordinate:
        mapping := '1*'

type Annotation:
    required link name to str
    link note to str
    link subject to Object

type DefaultTest1:
    link num to int:
        default := 42
    link foo to str

type DefaultTest2:
    link foo to str
    required link num to int:
        # XXX: circumventing sequence deficiency
        default :=
            SELECT DefaultTest1.num + 1
            ORDER BY DefaultTest1.num DESC
            LIMIT 1

type DefaultTest3:
    required link foo to float:
        # non-deterministic dynamic value
        default := random()

type DefaultTest4:
    required link bar to int:
        # deterministic dynamic value
        default := (SELECT count(DefaultTest4))

# links and types to test scalar links with link properties
link special:
    link property lang to str

link title:
    link property lang to str


type Offer:
    # title translated into multiple languages
    required link title to str:
        mapping := '1*'

    # some king of special offer for a specific language
    link special to str

# types to test some inheritance issues
type InputValue:
    link val to str

abstract type Callable:
    link args to InputValue:
        mapping := '1*'

type Field extending Callable:
    # This link 'args' appears to be overriding the inherited 'args'
    # from Callable.
    link args to InputValue:
        mapping := '1*'

type Directive extending Callable
